<html>
<head>
</head>
<body>

  <h3>Select a file from local drive and draw in canvas</h3>

  <div>
    <input type="file" id="input-file" />
  </div>
  
  <div style="display:none;">
    <img id="image-source">
  </div>

  <div>
    <canvas id="canvas" width=600 height=500></canvas>
  </div>
  
  <script>
    function handleFileSelect(evt) {
      var files = evt.target.files; // FileList object
  
      // Loop through the FileList and render image files as thumbnails.
      f = files[0];
  
      // Only process image files.
      if (!f.type.match('image.*')) {
        return;
      }

      var reader = new FileReader();

      // Closure to capture the file information.
      reader.onload = (function(theFile) {
        return function(e) {
          // render local image into html element
          var img = document.getElementById('image-source');
          img.src = e.target.result;

          // wait for image to be loaded, then draw on the canvas
          img.onload = function() {
            const canvas = document.getElementById('canvas');

            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            console.log('image size: ', img.naturalWidth, img.naturalHeight)
            canvas.width = img.naturalWidth;
            canvas.height = img.naturalHeight;

            // draw image html element onto canvas, keep image original size
            ctx.drawImage(img, 0, 0);

            // draw rectangle bounding box
            ctx.strokeStyle = 'yellow';
            ctx.beginPath();
            ctx.rect(20, 20, img.naturalWidth - 40, img.naturalHeight - 40);
            ctx.stroke();
          };
        };
      })(f);
  
      // Read in the image file as a data URL.
      reader.readAsDataURL(f);
    }
  
    document.getElementById('input-file').addEventListener('change', handleFileSelect, false);
  </script>
  
</body>
</html>
